<app-loading *ngIf="isLoading"></app-loading>
<app-header></app-header>
<div class="button__block">
  <button class="btn">Этап 1</button>
  <button class="btn">Этап 2</button>
</div>
<div class="container" id="dashboard" style="border: 1px solid #000;">
  <div class="content__opening">
    <h3>Протокол открытия ИТТ</h3>
    <div class="table">
      <div class="blockLeft">Название проекта</div>
      <div class="blockRight">{{ resultData.project?.name }}</div>
    </div>
    <div class="table">
      <div class="blockLeft">ID Проекта</div>
      <div class="blockRight">{{ resultData.project_id }}</div>
    </div>
    <div class="table">
      <div class="blockLeft">Название Конкурса</div>
      <div class="blockRight">{{ resultData.name }}</div>
    </div>
    <div class="table">
      <div class="blockLeft">Идентификация конкурса</div>
      <div class="blockRight">{{ resultData.project_center_anouncement_id }}</div>
    </div>
    <div class="table">
      <div class="blockLeft">Тип закупки</div>
      <div class="blockRight">{{ resultData.type_of_procurement }}</div>
    </div>
    <div class="table">
      <div class="blockLeft">Метод закупки</div>
      <div class="blockRight">{{ resultData.procurement_method }}</div>
    </div>
    <div class="table">
      <div class="blockLeft">Название клиента</div>
      <div class="blockRight">{{ resultData.project?.projects_center.name }}</div>
    </div>
    <div class="table">
      <div class="blockLeft">Количество претендентов</div>
      <div class="blockRight">{{ resultData.orders?.length }}</div>
    </div>
    <div class="table">
      <div class="blockLeft">Дата и время открытия</div>
      <div class="blockRight">{{ resultData.open_date }},    {{ resultData.open_time }}</div>
    </div>
    <div class="main-lots_block" style="border-bottom: 2px solid #000; padding-bottom: 30px;"
      *ngFor="let result of resultData.orders">
      <div class="content__details">
        <h3>Подробности о каждом предложении:</h3>
        <h4>Подробная информация о Претенденте:</h4>
        <div class="response_details">
          <div class="details-block">
            <div class="blockLeft">Полученное время:</div>
            <div class="blockRight">{{ result.created_at | date: 'short' }}</div>
          </div>
          <div class="details-block">
            <div class="blockLeft">Название претендента:</div>
            <div class="blockRight">{{ result.user?.subscriber?.company_name }}</div>
          </div>
          <div class="details-block">
            <div class="blockLeft">Является ли совместное предприятие?:</div>
            <div class="blockRight" *ngIf="result.partners?.length > 0">Yes</div>
            <div class="blockRight" *ngIf="result.partners?.length < 1">No</div>
          </div>
          <div class="details-block">
            <div class="blockLeft">Банковская гарантия:</div>
            <div class="blockRight" *ngIf="result.response_security_submited > 0">Yes</div>
            <div class="blockRight" *ngIf="result.response_security_submited < 1">No</div>
          </div>
        </div>
        <h4>Адрес претендент:</h4>
        <div class="response_address">
          <div class="details-block">
            <div class="blockLeft">Первый адрес:</div>
            <div class="blockRight">{{ result.user?.subscriber?.address_line1 }}</div>
          </div>
          <div class="details-block">
            <div class="blockLeft">Второй адрес:</div>
            <div class="blockRight">{{ result.user?.subscriber?.address_line2 }}</div>
          </div>
          <div class="details-block">
            <div class="blockLeft">Третий адрес:</div>
            <div class="blockRight">{{ result.user?.subscriber?.address_line3 }}</div>
          </div>
          <div class="details-block">
            <div class="blockLeft">Почтовый индекс:</div>
            <div class="blockRight">{{ result.user?.subscriber?.postal_code }}</div>
          </div>
          <div class="details-block">
            <div class="blockLeft">Город:</div>
            <div class="blockRight">{{ result.user?.subscriber?.town }}</div>
          </div>
          <div class="details-block">
            <div class="blockLeft">Страна:</div>
            <div class="blockRight">{{ result.user?.subscriber?.company_country }}</div>
          </div>
        </div>
        <div class="joint_detail">
          <h4>Подробная информация о совместном предприятии:</h4>
          <div class="detail_content" *ngFor="let partners of result.partners">
            <div class="details-block">
              <div class="blockLeft">Lead Partner?</div>
              <div class="blockRight" *ngIf="partners.leader > 0">Yes</div>
              <div class="blockRight" *ngIf="partners.leader < 1">No</div>
            </div>
            <div class="details-block">
              <div class="blockLeft">Organosation:</div>
              <div class="blockRight">{{ partners.name }}</div>
            </div>
          </div>
        </div>
      </div>
      <h3>Лоты:</h3>
      <div class="content__lots" *ngFor="let resultLots of result.lots">
        <div class="lots__block">
          <div class="lots-table">
            <div class="blockLeft">№ Лот</div>
            <div class="blockRight">{{ resultLots.lot_number }}</div>
          </div>
          <div class="lots-table">
            <div class="blockLeft">Название лота</div>
            <div class="blockRight">{{ resultLots.title }}</div>
          </div>
          <div class="lots-table">
            <div class="blockLeft">Общая сумма лота без учета НДС и скидок:</div>
            <div class="blockRight" *ngIf="resultLots.total > 1"> {{ resultLots.total | currency: 'TJS ' }} </div>
            <div class="blockRight" *ngIf="resultLots.total_dol > 1"> {{ resultLots.total_dol | currency: 'USD ' }} </div>
            <div class="blockRight" *ngIf="resultLots.total_euro > 1"> {{ resultLots.total_euro | currency: 'EUR ' }} </div>
          </div>
          <div class="lots-table">
            <div class="blockLeft">Сумма НДС:</div>
            <div class="blockRight" *ngIf="resultLots.vat > 1"> {{ resultLots.vat | currency: 'TJS ' }} </div>
            <div class="blockRight" *ngIf="resultLots.vat_dol > 1"> {{ resultLots.vat_dol | currency: 'USD ' }} </div>
            <div class="blockRight" *ngIf="resultLots.vat_euro > 1"> {{ resultLots.vat_euro | currency: 'EUR ' }} </div>
          </div>
          <div class="lots-table">
            <div class="blockLeft">Общий итог с учетом НДС, но без учета скидок:</div>
            <div class="blockRight" *ngIf="resultLots.vat > 1"> {{ resultLots.vat | currency: 'TJS ' }} </div>
            <div class="blockRight" *ngIf="resultLots.vat_dol > 1"> {{ resultLots.vat_dol | currency: 'USD ' }} </div>
            <div class="blockRight" *ngIf="resultLots.vat_euro > 1"> {{ resultLots.vat_euro | currency: 'EUR ' }} </div>
          </div>
        </div>
      </div>
      <div class="tender__total">
        <h3>Сумма тендера:</h3>
        <div class="lots__block">
          <div class="lots-table">
            <div class="blockLeft">Общая сумма тендера без учета НДС и скидки</div>
            <div class="blockRight" *ngIf="result.total > 1">{{ result.total | currency: 'TJS '}}</div>
            <div class="blockRight" *ngIf="result.total_dol > 1">{{ result.total_dol | currency: 'USD '}}</div>
            <div class="blockRight" *ngIf="result.total_euro > 1">{{ result.total_euro | currency: 'EUR '}}</div>          </div>
          <div class="lots-table">
            <div class="blockLeft">Эквивалент в Евро</div>
            <div class="blockRight">{{ result.total_euro | currency: 'EUR ' }}</div>
          </div>
          <div class="lots-table">
            <div class="blockLeft">Сумма НДС</div>
            <div class="blockRight" *ngIf="result.vat > 1">{{ result.vat | currency: 'TJS ' }}</div>
            <div class="blockRight" *ngIf="result.vat_dol > 1">{{ result.vat_dol | currency: 'USD ' }}</div>
            <div class="blockRight" *ngIf="result.vat_euro > 1">{{ result.vat_euro | currency: 'EUR ' }}</div>
          </div>
          <div class="lots-table">
            <div class="blockLeft">Эквивалент в Евро</div>
            <div class="blockRight">{{ result.total_euro | currency: 'EUR ' }}</div>
          </div>
          <div class="lots-table">
            <div class="blockLeft">Итого, включая НДС</div>
            <div class="blockRight"  *ngIf="result.vat > 1">{{ result.vat | currency: 'TJS ' }}</div>
            <div class="blockRight"  *ngIf="result.vat_dol > 1">{{ result.vat_dol | currency: 'USD ' }}</div>
            <div class="blockRight"  *ngIf="result.vat_euro > 1">{{ result.vat_euro | currency: 'EUR ' }}</div>
          </div>
          <div class="lots-table">
            <div class="blockLeft">Эквивалент в Евро</div>
            <div class="blockRight">{{ result.total_euro | currency: 'EUR ' }}</div>
          </div>
          <div class="lots-table">
            <div class="blockLeft">Общая сумма любого альтернативного предложения с учетом НДС, но <br> без учета скидки</div>
            <div class="blockRight" *ngIf="result.vat > 1">{{ result.total | currency: 'TJS ' }}</div>
            <div class="blockRight" *ngIf="result.vat_dol > 1">{{ result.total_dol | currency: 'USD ' }}</div>
            <div class="blockRight" *ngIf="result.vat_euro > 1">{{ result.total_euro | currency: 'EUR ' }}</div>
          </div>
          <div class="lots-table">
            <div class="blockLeft">Эквивалент в Евро</div>
            <div class="blockRight">{{ result.total_euro | currency: 'EUR ' }}</div>
          </div>
          <div class="lots-table">
            <div class="blockLeft">Предлагаемые скидки и методология их применения</div>
            <div class="blockRight" *ngIf="result.discount > 1">{{ result.discount | currency: 'TJS ' }}</div>
            <div class="blockRight" *ngIf="result.discount_dol > 1">{{ result.discount_dol | currency: 'USD ' }}</div>
            <div class="blockRight" *ngIf="result.discount_euro > 1">{{ result.discount_euro | currency: 'EUR ' }}</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="pdf_block">
  <button (click)="toPdf()" style="max-width: 1000px; margin: auto;">Экспортировать в PDF</button>
</div>



<div class="container" style="border: 1px solid #000; display: none;">
  <div class="content__opening">
    <h3>Протокол открытия ИТТ</h3>
    <div class="table">
      <div class="blockLeft">Название проекта</div>
      <div class="blockRight">{{ resultData.project?.name }}</div>
    </div>
    <div class="table">
      <div class="blockLeft">ID Проекта</div>
      <div class="blockRight">{{ resultData.project_id }}</div>
    </div>
    <div class="table">
      <div class="blockLeft">Название Конкурса</div>
      <div class="blockRight">{{ resultData.name }}</div>
    </div>
    <div class="table">
      <div class="blockLeft">Идентификация конкурса</div>
      <div class="blockRight">{{ resultData.project_center_anouncement_id }}</div>
    </div>
    <div class="table">
      <div class="blockLeft">Тип закупки</div>
      <div class="blockRight">{{ resultData.type_of_procurement }}</div>
    </div>
    <div class="table">
      <div class="blockLeft">Метод закупки</div>
      <div class="blockRight">{{ resultData.procurement_method }}</div>
    </div>
    <div class="table">
      <div class="blockLeft">Название клиента</div>
      <div class="blockRight">{{ resultData.project?.projects_center.name }}</div>
    </div>
    <div class="table">
      <div class="blockLeft">Количество претендентов</div>
      <div class="blockRight">{{ resultData.orders?.length }}</div>
    </div>
    <div class="table">
      <div class="blockLeft">Дата и время открытия</div>
      <div class="blockRight">{{ resultData.open_date }},    {{ resultData.open_time }}</div>
    </div>
    <div class="main-lots_block" style="border-bottom: 2px solid #000; padding-bottom: 30px;"
      *ngFor="let result of resultData.orders">
      <div class="content__details">
        <h3>Подробности о каждом предложении:</h3>
        <h4>Подробная информация о Претенденте:</h4>
        <div class="response_details">
          <div class="details-block">
            <div class="blockLeft">Полученное время:</div>
            <div class="blockRight">{{ result.created_at | date: 'short' }}</div>
          </div>
          <div class="details-block">
            <div class="blockLeft">Название претендента:</div>
            <div class="blockRight">{{ result.user?.subscriber?.company_name }}</div>
          </div>
          <div class="details-block">
            <div class="blockLeft">Является ли совместное предприятие?:</div>
            <div class="blockRight" *ngIf="result.partners?.length > 0">Yes</div>
            <div class="blockRight" *ngIf="result.partners?.length < 1">No</div>
          </div>
          <div class="details-block">
            <div class="blockLeft">Банковская гарантия:</div>
            <div class="blockRight" *ngIf="result.response_security_submited > 0">Yes</div>
            <div class="blockRight" *ngIf="result.response_security_submited < 1">No</div>
          </div>
        </div>
        <h4>Адрес претендент:</h4>
        <div class="response_address">
          <div class="details-block">
            <div class="blockLeft">Первый адрес:</div>
            <div class="blockRight">{{ result.user?.subscriber?.address_line1 }}</div>
          </div>
          <div class="details-block">
            <div class="blockLeft">Второй адрес:</div>
            <div class="blockRight">{{ result.user?.subscriber?.address_line2 }}</div>
          </div>
          <div class="details-block">
            <div class="blockLeft">Третий адрес:</div>
            <div class="blockRight">{{ result.user?.subscriber?.address_line3 }}</div>
          </div>
          <div class="details-block">
            <div class="blockLeft">Почтовый индекс:</div>
            <div class="blockRight">{{ result.user?.subscriber?.postal_code }}</div>
          </div>
          <div class="details-block">
            <div class="blockLeft">Город:</div>
            <div class="blockRight">{{ result.user?.subscriber?.town }}</div>
          </div>
          <div class="details-block">
            <div class="blockLeft">Страна:</div>
            <div class="blockRight">{{ result.user?.subscriber?.company_country }}</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<app-footer-page></app-footer-page>
